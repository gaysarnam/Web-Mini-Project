<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>College Help & Support System</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f3e8ff; /* Light purple page background */
    margin: 0;
    padding: 0;
  }

  .container {
    width: 100%;
    padding: 20px;
    box-sizing: border-box;
  }

  /* Post Input Card with image */
  .card {
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    background: #d9b3ff; /* Light purple input card */
    color: #4b0082; /* Dark purple text */
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    display: flex;
    align-items: flex-start;
    gap: 20px;
  }

  .card img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 10px;
  }

  .card-content {
    flex: 1;
  }

  .card input, .card textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 10px;
    border-radius: 5px;
    border: none;
    font-size: 14px;
    box-sizing: border-box;
    background: #e6ccff;
    color: #4b0082;
  }

  .card input::placeholder, .card textarea::placeholder {
    color: #7a3db8;
  }

  .card button {
    background: #9b59b6;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    float: right;
  }

  .card button:hover {
    background: #7a3db8;
  }

  .post, .suggestion {
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .post { background: #e1d4f7; }
  .suggestion { background: #f7e8fa; }

  .post-header, .suggestion-header { margin-bottom: 10px; }

  .post-time, .suggestion-time { font-size: 12px; color: #555; margin-top: 8px; }

  .post-type {
    display: inline-block;
    background: #b28ddb;
    color: #fff;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
    margin-left: 10px;
  }

  .btn { border: none; border-radius: 4px; padding: 5px 10px; cursor: pointer; font-size: 12px; margin-right: 6px; }
  .btn-like { background: #9b59b6; color: #fff; }
  .btn-like:hover { background: #7a3db8; }
  .btn-reply, .btn-view-suggestions { background: #6c757d; color: #fff; }
  .btn-reply:hover, .btn-view-suggestions:hover { background: #5a6268; }
  .btn-delete { background: #dc3545; color: #fff; float: right; }
  .btn-delete:hover { background: #c82333; }

  textarea { width: 100%; resize: vertical; min-height: 50px; box-sizing: border-box; }

  .suggestions-container {
    margin-top: 15px;
    margin-left: 20px;
    border-left: 2px solid #d3b9f5;
    padding-left: 15px;
  }

  /* Responsive: image above input on small screens */
  @media (max-width: 600px) {
    .card { flex-direction: column; align-items: stretch; }
    .card img { margin-bottom: 10px; width: 100%; height: auto; }
  }
</style>
</head>
<body>

<div class="container">

  <!-- Post Input Card -->
  <div class="card">
    <img src="https://th.bing.com/th/id/OIP.3fG2GfADrCknxVSFnmjDKgHaHa?o=7rm=3&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Help Image">
    <div class="card-content">
      <h3>Tell Us About Your Problem...</h3>
      <input type="text" id="title" placeholder="Title" />
      <textarea id="description" placeholder="Describe your problem"></textarea>
      <div style="margin-top:10px;">
        <input type="checkbox" id="anonymous" />
        <label for="anonymous">Submit anonymously</label>
      </div>
      <button onclick="addPost()">Post Problem</button>
    </div>
  </div>

  <!-- Posts Feed -->
  <div id="postsFeed"></div>

</div>

<script>
let posts = [];
let currentUser = 'John Doe';

function addPost() {
  const title = document.getElementById('title').value.trim();
  const description = document.getElementById('description').value.trim();
  const anonymous = document.getElementById('anonymous').checked;
  if (!title || !description) { alert('Please fill in both title and description.'); return; }

  posts.unshift({
    id: Date.now(),
    owner: currentUser,
    anonymous,
    title,
    description,
    likes: [],
    suggestions: [],
    createdAt: new Date()
  });

  clearPostForm();
  renderPosts();
}

function clearPostForm() {
  document.getElementById('title').value = '';
  document.getElementById('description').value = '';
  document.getElementById('anonymous').checked = false;
}

function renderPosts() {
  const feed = document.getElementById('postsFeed');
  feed.innerHTML = '';

  posts.forEach(post => {
    const postDiv = document.createElement('div');
    postDiv.className = 'post';

    const header = document.createElement('div');
    header.className = 'post-header';
    const headerTop = document.createElement('div');
    headerTop.style.display = 'flex'; headerTop.style.alignItems = 'center';
    const userNameElem = document.createElement('strong');
    userNameElem.textContent = post.anonymous ? 'Anonymous' : post.owner;
    headerTop.appendChild(userNameElem);
    const typeBadge = document.createElement('span');
    typeBadge.className = 'post-type'; typeBadge.textContent = 'Problem'; typeBadge.style.marginLeft = '10px';
    headerTop.appendChild(typeBadge);
    header.appendChild(headerTop);
    const titleElem = document.createElement('div'); titleElem.style.fontWeight='bold'; titleElem.style.marginTop='5px'; titleElem.textContent=post.title;
    header.appendChild(titleElem);
    postDiv.appendChild(header);

    const desc = document.createElement('div'); desc.textContent = post.description; desc.style.marginTop='8px';
    postDiv.appendChild(desc);

    const timeElem = document.createElement('small'); timeElem.className='post-time';
    timeElem.textContent = `Submitted by ${post.anonymous ? 'Anonymous' : post.owner} on ${post.createdAt.toLocaleDateString()}, ${post.createdAt.toLocaleTimeString()}`;
    postDiv.appendChild(timeElem);

    const actionsDiv = document.createElement('div'); actionsDiv.style.marginTop='10px';
    const likeBtn = document.createElement('button'); likeBtn.className='btn btn-like';
    likeBtn.textContent = `👍 Like (${post.likes.length})`; likeBtn.onclick = () => toggleLikePost(post.id);
    actionsDiv.appendChild(likeBtn);

    const viewSugBtn = document.createElement('button'); viewSugBtn.className='btn btn-view-suggestions'; viewSugBtn.textContent='View Suggestions';
    actionsDiv.appendChild(viewSugBtn);

    if(!post.anonymous && post.owner===currentUser){
      const delBtn=document.createElement('button'); delBtn.className='btn btn-delete'; delBtn.textContent='Delete';
      delBtn.onclick=()=>{if(confirm('Are you sure you want to delete this post?')){posts=posts.filter(p=>p.id!==post.id);renderPosts();}};
      actionsDiv.appendChild(delBtn);
    }
    postDiv.appendChild(actionsDiv);

    const suggestionsContainer = document.createElement('div'); suggestionsContainer.className='suggestions-container'; suggestionsContainer.style.display='none';

    post.suggestions.forEach(sug=>{
      const sugDiv=document.createElement('div'); sugDiv.className='suggestion';
      const sugHeader=document.createElement('div'); sugHeader.className='suggestion-header';
      const sugUser=document.createElement('strong'); sugUser.textContent=sug.anonymous?'Anonymous':sug.owner;
      sugHeader.appendChild(sugUser);
      const sugLikeBtn=document.createElement('button'); sugLikeBtn.className='btn btn-like'; sugLikeBtn.style.marginLeft='10px';
      sugLikeBtn.textContent=`👍 Like (${sug.likes.length})`; sugLikeBtn.onclick=()=>toggleLikeSuggestion(post.id,sug.id);
      sugHeader.appendChild(sugLikeBtn);
      sugDiv.appendChild(sugHeader);
      const sugDesc=document.createElement('div'); sugDesc.textContent=sug.description; sugDiv.appendChild(sugDesc);
      const sugTime=document.createElement('small'); sugTime.className='suggestion-time';
      sugTime.textContent=`Submitted on ${sug.createdAt.toLocaleDateString()}, ${sug.createdAt.toLocaleTimeString()}`;
      sugDiv.appendChild(sugTime);
      suggestionsContainer.appendChild(sugDiv);
    });

    const sugInputDiv=document.createElement('div'); sugInputDiv.style.marginTop='10px';
    const sugTextarea=document.createElement('textarea'); sugTextarea.placeholder='Write a suggestion...'; sugTextarea.rows=3;
    const sugAnonCheckbox=document.createElement('input'); sugAnonCheckbox.type='checkbox'; sugAnonCheckbox.id=`anon-${post.id}`;
    const sugAnonLabel=document.createElement('label'); sugAnonLabel.htmlFor=sugAnonCheckbox.id; sugAnonLabel.textContent=' Submit anonymously';
    const sugSubmitBtn=document.createElement('button'); sugSubmitBtn.textContent='Submit Suggestion'; sugSubmitBtn.className='btn btn-like'; sugSubmitBtn.style.marginTop='5px';
    sugSubmitBtn.onclick=()=>{const text=sugTextarea.value.trim();if(!text){alert('Suggestion cannot be empty.');return;}post.suggestions.push({id:Date.now(),owner:currentUser,anonymous:sugAnonCheckbox.checked,description:text,likes:[],replies:[],createdAt:new Date()});renderPosts();};
    sugInputDiv.appendChild(sugTextarea); sugInputDiv.appendChild(document.createElement('br'));
    sugInputDiv.appendChild(sugAnonCheckbox); sugInputDiv.appendChild(sugAnonLabel); sugInputDiv.appendChild(sugSubmitBtn);
    suggestionsContainer.appendChild(sugInputDiv);

    postDiv.appendChild(suggestionsContainer);

    viewSugBtn.onclick=()=>{if(suggestionsContainer.style.display==='none'){suggestionsContainer.style.display='block';viewSugBtn.textContent='Hide Suggestions';}else{suggestionsContainer.style.display='none';viewSugBtn.textContent='View Suggestions';}};

    feed.appendChild(postDiv);
  });
}

function toggleLikePost(postId){
  const post=posts.find(p=>p.id===postId);
  if(!post)return;
  const idx=post.likes.indexOf(currentUser);
  idx===-1?post.likes.push(currentUser):post.likes.splice(idx,1);
  renderPosts();
}

function toggleLikeSuggestion(postId,sugId){
  const post=posts.find(p=>p.id===postId); if(!post)return;
  const sug=post.suggestions.find(s=>s.id===sugId); if(!sug)return;
  const idx=sug.likes.indexOf(currentUser);
  idx===-1?sug.likes.push(currentUser):sug.likes.splice(idx,1);
  renderPosts();
}

renderPosts();
</script>

</body>
</html>
